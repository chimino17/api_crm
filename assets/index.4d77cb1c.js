import{j as N,u as F,L as w,O as A,a as E,r as p,c as S,b as f,d as $,F as _,e as O,f as u,g as k,B as P,R as I,h as b,i as L,k as R}from"./vendor.48390645.js";const T=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function c(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=c(s);fetch(s.href,l)}};T();const e=N.exports.jsx,a=N.exports.jsxs,y=N.exports.Fragment,q=()=>{const o=F().pathname;return a("div",{className:"md:flex md:min-h-screen",children:[a("div",{className:"md:w-1/4 bg-blue-900 px-5 py-10",children:[e("h2",{className:"text-4xl font-black text-center text-white ",children:"CRM - Clientes"}),a("nav",{className:"mt-10",children:[e(w,{className:`${o==="/api_crm"?"text-blue-300":"text-white"} text-2xl block mt-2 hover:text-blue-300`,to:"/api_crm",children:"Clientes"}),e(w,{className:`${o==="/api_crm/nuevo"?"text-blue-300":"text-white"} text-2xl block mt-2 hover:text-blue-300`,to:"/api_crm/nuevo",children:"Nuevo Cliente"})]})]}),e("div",{className:"md:w-3/4 p-10 md:h-screen overflow-scroll",children:e(A,{})})]})},B=({cliente:t,handleEliminar:o})=>{const c=E(),{nombre:n,empresa:s,email:l,telefono:r,notas:h,id:m}=t;return a("tr",{className:"border-b hover:bg-gray-50",children:[e("td",{className:"p-3",children:n}),a("td",{className:"p-3",children:[a("p",{children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Email: "})," ",l," "]}),a("p",{children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Tel: "})," ",r," "]})]}),e("td",{className:"p-3",children:s}),a("td",{className:"p-3",children:[e("button",{type:"button",className:"bg-yellow-500 hover:bg-yellow-600 block w-full text-white p-2 uppercase font-bold text-xs",onClick:()=>c(`/api_crm/${m}`),children:"Ver"}),e("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3",onClick:()=>c(`/api_crm/editar/${m}`),children:"Editar"}),e("button",{type:"button",className:"bg-red-600 hover:bg-red-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3",onClick:()=>o(m),children:"Eliminar"})]})]})},D=()=>{const[t,o]=p.exports.useState([]);p.exports.useEffect(()=>{(async()=>{try{const r=await(await fetch("https://my-json-server.typicode.com/chimino17/api_crm/clientes")).json();o(r)}catch(s){console.log(s)}})()},[]);const c=async n=>{if(confirm("\xBFDeseas eliminar este cliente?"))try{const l=`https://my-json-server.typicode.com/chimino17/api_crm/clientes/${n}`;await(await fetch(l,{method:"DELETE"})).json();const h=t.filter(m=>m.id!==n);o(h)}catch(l){console.log(l)}};return a(y,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Clientes"}),e("p",{className:"mt-3",children:"Administra tus clientes"}),a("table",{className:"w-full mt-5 table-auto shadow bg-white",children:[e("thead",{className:"bg-blue-800 text-white",children:a("tr",{children:[e("th",{className:"p-2",children:"Nombre"}),e("th",{className:"p-2",children:"Contacto"}),e("th",{className:"p-2",children:"Empresa"}),e("th",{className:"p-2",children:"Acciones"})]})}),e("tbody",{children:t.map(n=>e(B,{cliente:n,handleEliminar:c},n.id))})]})]})},x=({children:t})=>e("div",{className:"text-center my-4 bg-red-600 text-white font-bold p-3 uppercase",children:t});const j=()=>a("div",{className:"sk-chase",children:[e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"})]}),g=({cliente:t,cargando:o})=>{var l,r,h,m,v;const c=E(),n=S().shape({nombre:f().min(3,"El Nombre es muy corto").max(20,"El Nombre es muy largo").required("El Nombre del Cliente es Obligatorio"),empresa:f().required("El Nombre de la empresa es obligatorio"),email:f().email("Email no v\xE1lido").required("El email es obligatorio"),telefono:$().positive("N\xFAmero no v\xE1lido").integer("N\xFAmero no v\xE1lido").typeError("El N\xFAmero no es v\xE1lido")}),s=async i=>{try{let d;if(t.id){const C=`https://my-json-server.typicode.com/chimino17/api_crm/clientes/${t.id}`;d=await fetch(C,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}else d=await fetch("https://my-json-server.typicode.com/chimino17/api_crm/clientes",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});await d.json(),c("/api_crm")}catch(d){console.log(d)}};return o?e(j,{}):a("div",{className:"bg-white mt-10 px-5 py-10 rounded-md shadow-md  md:w-3/4 mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-xl uppercase text-center",children:t!=null&&t.nombre?"Editar Cliente":"Agregar Cliente"}),e(_,{initialValues:{nombre:(l=t==null?void 0:t.nombre)!=null?l:"",empresa:(r=t==null?void 0:t.empresa)!=null?r:"",email:(h=t==null?void 0:t.email)!=null?h:"",telefono:(m=t==null?void 0:t.telefono)!=null?m:"",notas:(v=t==null?void 0:t.notas)!=null?v:""},enableReinitialize:!0,onSubmit:async(i,{resetForm:d})=>{await s(i),d()},validationSchema:n,children:({errors:i,touched:d})=>a(O,{className:"mt-10",children:[a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"nombre",children:"Nombre:"}),e(u,{id:"nombre",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Nombre del Cliente",name:"nombre"}),i.nombre&&d.nombre?e(x,{children:i.nombre}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"empresa",children:"Empresa:"}),e(u,{id:"empresa",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Empresa del Cliente",name:"empresa"}),i.empresa&&d.empresa?e(x,{children:i.empresa}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"email",children:"E-mail:"}),e(u,{id:"email",type:"email",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Email del Cliente",name:"email"}),i.email&&d.email?e(x,{children:i.email}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"telefono",children:"Tel\xE9fono:"}),e(u,{id:"telefono",type:"tel",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Tel\xE9fono del Cliente",name:"telefono"}),i.telefono&&d.telefono?e(x,{children:i.telefono}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"notas",children:"Notas:"}),e(u,{as:"textarea",id:"notas",type:"text",className:"mt-2 block w-full p-3 bg-gray-50 h-40",placeholder:"Notas del Cliente",name:"notas"})]}),e("input",{type:"submit",value:t!=null&&t.nombre?"Editar Cliente":"Agregar Cliente",className:"mt-5 w-full bg-blue-800 p-3 text-white uppercase font-bold text-lg"})]})})]})};g.defaultProps={cliente:{},cargando:!1};const M=()=>a(y,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Nuevo Cliente"}),e("p",{className:"mt-3",children:"Llena los siguientes campos para registrar un cliente"}),e(g,{})]}),V=()=>{const[t,o]=p.exports.useState({}),[c,n]=p.exports.useState(!0),{id:s}=k();return p.exports.useEffect(()=>{(async()=>{try{const r=`https://my-json-server.typicode.com/chimino17/api_crm/clientes/${s}`,m=await(await fetch(r)).json();o(m)}catch(r){console.log(r)}n(!c)})()},[]),a(y,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Editar Cliente"}),e("p",{className:"mt-3",children:"Utiliza este formulario para editar datos de un cliente"}),t!=null&&t.nombre?e(g,{cliente:t,cargando:c}):e("p",{children:"Cliente ID no v\xE1lido"})]})},z=()=>{const[t,o]=p.exports.useState({}),[c,n]=p.exports.useState(!0),{id:s}=k();return p.exports.useEffect(()=>{(async()=>{try{const r=`https://my-json-server.typicode.com/chimino17/api_crm/clientes/${s}`,m=await(await fetch(r)).json();o(m)}catch(r){console.log(r)}n(!c)})()},[]),c?e(j,{}):Object.keys(t).length===0?e("p",{children:"No Hay Resultados"}):a("div",{children:[a("h1",{className:"font-black text-4xl text-blue-900",children:["Ver Cliente: ",t.nombre]}),e("p",{className:"mt-3",children:"Informaci\xF3n del Cliente"}),t.nombre&&a("p",{className:"text-4xl text-gray-600 mt-10",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Cliente: "}),t.nombre]}),t.email&&a("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Email: "}),t.email]}),t.telefono&&a("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Tel\xE9fono: "}),t.telefono]}),t.empresa&&a("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Empresa: "}),t.empresa]}),t.notas&&a("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Notas: "}),t.notas]})]})};function J(){return e(P,{children:e(I,{children:a(b,{path:"/api_crm",element:e(q,{}),children:[e(b,{index:!0,element:e(D,{})}),e(b,{path:"nuevo",element:e(M,{})}),e(b,{path:"editar/:id",element:e(V,{})}),e(b,{path:":id",element:e(z,{})})]})})})}L.render(e(R.StrictMode,{children:e(J,{})}),document.getElementById("root"));
